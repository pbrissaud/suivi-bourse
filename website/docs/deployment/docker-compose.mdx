---
title: Docker Compose
description: Docker Compose Installation
sidebar_position: 3
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Docker Compose mode deploys a full environment with a pre-configured Prometheus and Grafana.

## Requirements
* Windows, Linux or macOS
* Docker (> 19.03)
* Docker Compose

## Steps

1. Download the source code of the project from the [latest release](https://github.com/pbrissaud/suivi-bourse/releases/latest) and extract it.

2. Move to the downloaded folder and go to **docker-compose** folder

3. Configure your portfolio using one of the two modes:

<Tabs>
  <TabItem value="manual" label="Manual Mode" default>

Edit `config.yaml` file following the [configuration doc](/docs/intro/config#manual-mode):

```yaml title="config.yaml"
shares:
- name: Apple
  symbol: AAPL
  purchase:
    quantity: 1
    fee: 2
    cost_price: 119.98
  estate:
    quantity: 2
    received_dividend: 2.85
```

  </TabItem>
  <TabItem value="events" label="Events Mode">

1. Create a `settings.yaml` file:

```yaml title="settings.yaml"
mode: events
events:
  source: ~/.config/SuiviBourse/events/
  watch: true
```

2. Create an `events/` directory and add your transaction files:

```csv title="events/portfolio.csv"
date,event_type,symbol,name,quantity,unit_price,fee,amount,notes
2024-01-15,BUY,AAPL,Apple Inc,10,150.00,2.50,,Initial purchase
2024-03-01,DIVIDEND,AAPL,Apple Inc,,,,8.50,Q1 2024
```

3. Set the environment variable in `.env`:

```bash title=".env"
SB_CONFIG_MODE=events
```

See the [events mode documentation](/docs/intro/config#events-mode) for the full CSV format.

  </TabItem>
</Tabs>

4. Start the stack:

```bash
docker-compose up -d
```

## Environment Variables

Edit the **.env** file in the **docker-compose** folder to set environment variables:

| Variable | Description | Default |
|----------|-------------|---------|
| `SB_CONFIG_MODE` | Configuration mode (`manual` or `events`) | `manual` |
| `SB_SCRAPING_INTERVAL` | Price scraping interval in seconds | `120` |
| `SB_INGESTION_INTERVAL` | Event ingestion interval in seconds | `300` |
| `LOG_LEVEL` | Application log level | `INFO` |

## File Structure

After setup, your docker-compose folder should look like:

<Tabs>
  <TabItem value="manual" label="Manual Mode" default>

```
docker-compose/
├── .env
├── config.yaml          # Your portfolio configuration
├── docker-compose.yaml
├── grafana_provisioning/
└── prometheus_provisioning/
```

  </TabItem>
  <TabItem value="events" label="Events Mode">

```
docker-compose/
├── .env                 # Contains SB_CONFIG_MODE=events
├── settings.yaml        # Mode configuration
├── events/              # Your transaction files
│   ├── 2023.csv
│   └── 2024.csv
├── docker-compose.yaml
├── grafana_provisioning/
└── prometheus_provisioning/
```

  </TabItem>
</Tabs>
